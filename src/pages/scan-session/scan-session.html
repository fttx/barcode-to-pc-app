<ion-header>

  <ion-navbar hideBackButton color="primary">

    <ion-title>{{ getTitle() }}</ion-title>

    <ion-buttons start>
      <button ion-button title="Remove mode" (click)="onRemoveModeClick()" (press)="onRemoveModePress()" style="transform: scale(1.5)" color="danger">
        <ion-icon name="remove-circle"></ion-icon>
      </button>

      <!-- Divider -->
      <button ion-button style="opacity: .4;"> | </button>

      <button ion-button icon-only>
        <ion-icon name="ios-wifi" [style.color]="connected ? 'white': 'rgba(255,255,255,.4)'"></ion-icon>
      </button>
    </ion-buttons>


    <ion-buttons end>
      <button title="Sync" [disabled]="!connected" [hidden]="!(repeatingStatus == 'stopped')" ion-button icon-only (click)="onRepeatAllClick()">
        <ion-icon name="refresh"></ion-icon>
      </button>

      <button [hidden]="!(repeatingStatus == 'repeating' || repeatingStatus == 'paused')" ion-button icon-only (click)="stopRepeatingClick()">
        <ion-icon name="square"></ion-icon>
      </button>

      <button [hidden]="!(repeatingStatus == 'repeating')" ion-button icon-only (click)="onPauseRepeatingClick()">
        <ion-icon name="pause"></ion-icon>
      </button>

      <button [hidden]="!(repeatingStatus == 'paused')" ion-button icon-only (click)="onResumeRepeatingClick()">
        <ion-icon name="play"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>

<ion-content>
  <ion-list [virtualScroll]="(scanSession && scanSession.scannings) || []" [approxItemHeight]="'47px'" [bufferRatio]="5" id="bwp-list">
    <button ion-item no-padding *virtualItem="let scan; let i = index" (click)="onItemClicked(scan, i)" (press)="onItemPressed(scan, i)" [class.animate-first-item]="newItem && i == 0" [color]="getBackgroundColor(scan)">
      <!-- BWP::start -->
      <div class="bwp-display-value" text-wrap [innerHTML]="getDisplayValue(scan)"></div>
      <ion-icon class="bwp-sync-status" [name]="scan.ack ? 'checkmark-circle' : 'alert'" [style.color]="scan.ack ? 'green' : 'red'"></ion-icon>
      <!-- BWP::end -->
    </button>
  </ion-list>

  <div class="empty" *ngIf="((scanSession && scanSession.scannings) || []).length == 0">
    <img src="assets/welcome/a5fsa.jpg" alt="logo" style="max-width: 50%;margin-top:60px" />
    <br />
    <h2>We're all set.</h2>
    <p>Scan a barcode to get started</p>
  </div>

</ion-content>

<ion-footer ion-fixed style="opacity: 0;">
  <ion-toolbar style="direction: ltr">
    <keyboard-input (touchstart)="keyboardInputTouchStart($event)" #keyboardInput></keyboard-input>
    <ion-buttons end>
      <button class="btn-send-manual-input" ion-button strong (touchstart)="$event.preventDefault(); $event.stopPropagation();" (touchend)="$event.preventDefault(); $event.stopPropagation(); onEnterClick($event);">
        <ion-icon name="send" icon-only color="primary"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>
